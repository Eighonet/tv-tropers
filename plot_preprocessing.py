#!/usr/bin/env python
# coding: utf-8

# # вот это писать

# In[322]:

import pandas as pd
import numpy as np
import joblib

# joblib.dump(clfs, 'clfs')
clfs = joblib.load('clfs')


# In[264]:


popular_trops = ['BigBad',
 'ShoutOut',
 'OhCrap',
 'ChekhovsGun',
 'Foreshadowing',
 'Jerkass',
 'BittersweetEnding',
 'DeadpanSnarker',
 'TitleDrop',
 'RunningGag',
 'DownerEnding',
 'LargeHam',
 'LampshadeHanging',
 'WhatHappenedToTheMouse',
 'DrivenToSuicide',
 'TooDumbToLive',
 'HeroicSacrifice',
 'GroinAttack',
 'KarmaHoudini',
 'MeaningfulName',
 'KickTheDog',
 'AssholeVictim',
 'TheCameo',
 'BerserkButton',
 'TruthInTelevision',
 'TheDragon',
 'RealLife',
 'EstablishingCharacterMoment',
 'BrickJoke',
 'PrecisionFStrike',
 'RealityEnsues',
 'InUniverse',
 'MoodWhiplash',
 'CallBack',
 'TheReveal',
 'YourCheatingHeart',
 'HeelFaceTurn',
 'Fanservice',
 'TheReasonYouSuckSpeech',
 'JerkWithAHeartOfGold',
 'BookEnds',
 'AxCrazy',
 'IronicEcho',
 'MsFanservice',
 'PetTheDog',
 'HeroicBSOD',
 'EvenEvilHasStandards',
 'PlayedForLaughs',
 'ActorAllusion',
 'ButtMonkey',
 'WordOfGod',
 'BigDamnHeroes',
 'BlatantLies',
 'NotSoDifferent',
 'TakeThat',
 'HoistByHisOwnPetard',
 'WhamLine',
 'SubvertedTrope',
 'FanDisservice',
 'GettingCrapPastTheRadar',
 'WhatTheHellHero',
 'TemptingFate',
 'MyGodWhatHaveIDone',
 'AdultFear',
 'SceneryPorn',
 'UpToEleven',
 'CreatorCameo',
 'MythologyGag',
 'BlackComedy',
 'NiceJobBreakingItHero',
 'DisproportionateRetribution',
 'RoaringRampageOfRevenge',
 'HopeSpot',
 'ProductPlacement',
 'EyeScream',
 'JustifiedTrope',
 'LaserGuidedKarma',
 'ShownTheirWork',
 'ChekhovsSkill',
 'CurbStompBattle',
 'VillainousBreakdown',
 'Expy',
 'AffablyEvil',
 'TheAlcoholic',
 'OnlySaneMan',
 'ScrewThisImOuttaHere',
 'PoliceAreUseless',
 'ActionGirl',
 'NoNameGiven',
 'TheStinger',
 'GoryDiscretionShot',
 'IdiotBall',
 'NiceGuy',
 'NoodleIncident',
 'ArcWords',
 'AntiHero',
 'SpiritualSuccessor',
 'DoesThisRemindYouOfAnything',
 'CorruptCorporateExecutive',
 'ExactWords',
 'BadassBoast',
 'WouldHurtAChild',
 'VillainProtagonist',
 'BodyHorror',
 'FreezeFrameBonus',
 'ReasonableAuthorityFigure',
 'CoolCar',
 'SoundtrackDissonance',
 'CharacterDevelopment',
 'BilingualBonus',
 'Irony',
 'CrapsackWorld',
 'FreudianExcuse',
 'SmugSnake',
 'PapaWolf',
 'Mooks',
 'HypocriticalHumor',
 'FauxAffablyEvil',
 'ChekhovsGunman',
 'Determinator',
 'RedHerring',
 'JerkAss',
 'CatchPhrase',
 'AllThereInTheManual',
 'NeverTrustATrailer',
 'KarmicDeath',
 'TookALevelInBadass',
 'ArtisticLicenseHistory',
 'AbusiveParents',
 'CassandraTruth',
 'DisappearedDad',
 'TheMole',
 'JerkassHasAPoint',
 'ForegoneConclusion',
 'LoveTriangle',
 'ClusterFBomb',
 'CompositeCharacter',
 'BigNo',
 'BatmanGambit',
 'WouldHitAGirl',
 'MacGuffin',
 'ArsonMurderAndJaywalking',
 'TrailersAlwaysSpoil',
 'MadeOfIron',
 'DirtyCop',
 'FunnyBackgroundEvent',
 'SequelHook',
 'BoomHeadshot',
 'ContrivedCoincidence',
 'SerialKiller',
 'DirtyCoward',
 'VeryLooselyBasedOnATrueStory',
 'SarcasmMode',
 'NoHoldsBarredBeatdown',
 'RuleOfCool',
 'MindScrew',
 'Beat',
 'DarkerAndEdgier',
 'BreakingTheFourthWall',
 'ForTheEvulz',
 'ImpaledWithExtremePrejudice',
 'OffWithHisHead',
 'ComicallyMissingThePoint',
 'NoCelebritiesWereHarmed',
 'ItsAllAboutMe',
 'EarnYourHappyEnding',
 'MeaningfulEcho',
 'Adorkable',
 'InsistentTerminology',
 'BadBoss',
 'Hypocrite',
 'CoversAlwaysLie',
 'DistractedByTheSexy',
 'Gorn',
 'BitchInSheepsClothing',
 'RefugeInAudacity',
 'LighterAndSofter',
 'StealthPun',
 'AlphaBitch',
 'Squick',
 'SanitySlippage',
 'AntiVillain',
 'MaleGaze',
 'ShowWithinAShow',
 'AdaptationExpansion',
 'FinalGirl',
 'AsHimself',
 'StockFootage',
 'HiddenDepths',
 'MissingMom',
 'AnachronismStew',
 'CruelAndUnusualDeath',
 'ContinuityNod',
 'ImprobableAimingSkills',
 'ImprovisedWeapon',
 'FromBadToWorse',
 'ExactlyWhatItSaysOnTheTin',
 'FemmeFatale',
 'TheSociopath',
 'MamaBear',
 'HowWeGotHere',
 'ReallyGetsAround',
 'AdaptedOut',
 'NothingIsScarier',
 'EurekaMoment',
 'AnAesop',
 'DisneyVillainDeath',
 'ShirtlessScene',
 'PreMortemOneLiner',
 'DamselInDistress',
 'RuleOfThree',
 'HappilyMarried',
 'HeelRealization',
 'TropeNamer',
 'TimeSkip',
 'DespairEventHorizon',
 'FaceHeelTurn',
 'BaitAndSwitch',
 'MercyKill',
 'PunctuatedForEmphasis',
 'HateSink',
 'ThoseTwoGuys',
 'YouHaveOutlivedYourUsefulness',
 'WorthyOpponent',
 'BreakTheCutie',
 'NeverMyFault',
 'GilliganCut',
 'GenreSavvy',
 'Subverted',
 'DeathGlare',
 'EvenEvilHasLovedOnes',
 'ADateWithRosiePalms',
 'WellIntentionedExtremist',
 'HonorBeforeReason',
 'OohMeAccentsSlipping',
 'RealityIsUnrealistic',
 'BondOneLiner',
 'KillEmAll',
 'UnreliableNarrator',
 'Lampshaded',
 'CarFu',
 'MoreDakka',
 'ItMakesSenseInContext',
 'JumpScare',
 'FaceDeathWithDignity',
 'DemotedToExtra',
 'WhereAreTheyNowEpilogue',
 'RousingSpeech',
 'BlackDudeDiesFirst',
 'InvokedTrope',
 'PoliticallyIncorrectVillain',
 'AsYouKnow',
 'WhamShot',
 'Flashback',
 'Fingore',
 'ItsPersonal',
 'AdaptationalVillainy',
 'RuleOfSymbolism',
 'TheEighties',
 'CoolOldGuy',
 'KillItWithFire',
 'NiceJobFixingItVillain',
 'TranquilFury',
 'MaybeMagicMaybeMundane',
 'FinalBattle',
 'SeriousBusiness',
 'BettyAndVeronica',
 'LaResistance',
 'StalkerWithACrush',
 'TakingYouWithMe',
 'DoubleEntendre',
 'MrFanservice',
 'FamousLastWords',
 'ImagineSpot',
 'YouHaveFailedMe',
 'AdaptationalHeroism',
 'AnyoneCanDie',
 'ManipulativeBastard',
 'PunchClockVillain',
 'Cloudcuckoolander',
 'ScaryBlackMan',
 'RuleOfFunny',
 'CaptainObvious',
 'Leitmotif',
 'Deconstruction',
 'TheStoic',
 'CombatPragmatist',
 'JerkJock',
 'DeathByAdaptation',
 'MadScientist',
 'PrettyInMink',
 'GoldDigger',
 'ArmorPiercingQuestion',
 'DecoyProtagonist',
 'TropeCodifier',
 'DrowningMySorrows',
 'ArtisticLicenseBiology',
 'AdaptationDistillation',
 'StuffBlowingUp',
 'ColdBloodedTorture',
 'AmbiguouslyGay',
 'RedemptionEqualsDeath',
 'TheOner',
 'ShellShockedVeteran',
 'BewareTheNiceOnes',
 'WarIsHell',
 'GunsAkimbo',
 'TheBadGuyWins',
 'PunnyName',
 'ThereIsNoKillLikeOverkill',
 'AvertedTrope',
 'NiceHat',
 'RaceLift',
 'EvilLaugh',
 'WellDoneSonGuy',
 'CampGay',
 'NotEvenBotheringWithTheAccent',
 'FateWorseThanDeath',
 'SparedByTheAdaptation',
 'ManlyTears',
 'PlayedWith',
 'TheDitz',
 'ManChild',
 'AdaptationNameChange',
 'LeaningOnTheFourthWall',
 'TapOnTheHead',
 'HairTriggerTemper',
 'CastingGag',
 'FakingTheDead',
 'ImperialStormtrooperMarksmanshipAcademy',
 'PoorCommunicationKills',
 'MeetCute',
 'ArtisticLicensePhysics',
 'OneManArmy',
 'Mook',
 'GainaxEnding',
 'TheCasanova',
 'ActuallyPrettyFunny',
 'ChewingTheScenery',
 'EvilPlan',
 'DarkAndTroubledPast',
 'AndStarring',
 'OnlyKnownByTheirNickname',
 'AlliterativeName',
 'MatchCut',
 'TheDogBitesBack',
 'BeautyIsNeverTarnished',
 'HeterosexualLifePartners',
 'InNameOnly',
 'AnArmAndALeg',
 'ParentalAbandonment',
 'TheAtoner',
 'DeliberateValuesDissonance',
 'OOCIsSeriousBusiness',
 'FailedASpotCheck',
 'VomitIndiscretionShot',
 'AttemptedRape',
 'BottomlessMagazines',
 'VisualPun',
 'BloodlessCarnage',
 'SayMyName',
 'TheCavalry',
 'BarBrawl',
 'TheFilmOfTheBook',
 'GreenEyedMonster',
 'DullSurprise',
 'EnemyMine',
 'BecomingTheMask',
 'Homage',
 'AndIMustScream',
 'TheSeventies',
 'ExtremelyShortTimespan',
 'NotQuiteDead',
 'UnusuallyUninterestingSight',
 'ActionPrologue',
 'PragmaticAdaptation',
 'DeliberatelyMonochrome',
 'TheHero',
 'InfantImmortality',
 'MayDecemberRomance',
 'UnusualEuphemism',
 'DeathBySex',
 'GreaterScopeVillain',
 'ObfuscatingStupidity',
 'DefrostingIceQueen',
 'FramingDevice',
 'AllJustADream',
 'CelebrityParadox',
 'CreepyChild',
 'TheDreaded',
 'KnifeNut',
 'ManicPixieDreamGirl',
 'AllGirlsWantBadBoys',
 'YouKilledMyFather',
 'LoveAtFirstSight',
 'ProperlyParanoid',
 'AluminumChristmasTrees',
 'BeCarefulWhatYouWishFor',
 'BullyingADragon',
 'BloodFromTheMouth',
 'Averted',
 'BloodKnight',
 'AscendedExtra',
 'TakeAThirdOption',
 'BigApplesauce',
 'TheAllegedCar',
 'ParentalSubstitute',
 'DiscussedTrope',
 'INeedAFreakingDrink',
 'HumiliationConga',
 'BasedOnATrueStory',
 'OverlyLongGag',
 'FlippingTheBird',
 'ThoseWackyNazis',
 'EveryoneHasStandards',
 'DrivesLikeCrazy',
 'BadassLongcoat',
 'DeusExMachina',
 'AffectionateParody',
 'CrazyPrepared',
 'BelligerentSexualTension',
 'TheGhost',
 'EpicFail',
 'HeKnowsTooMuch',
 'FridgeBrilliance',
 'HilarityEnsues',
 'FilmNoir',
 'InvertedTrope',
 'RedOniBlueOni',
 'HistoricalDomainCharacter',
 'Bookends',
 'Novelization',
 'RedShirt',
 'IncrediblyLamePun',
 'ShutUpHannibal',
 'NeckSnap',
 'DomesticAbuse',
 'BrokenBird',
 'NoSell',
 'StepfordSmiler',
 'CowboyCop',
 'CatapultNightmare',
 'ManOnFire',
 'EveryCarIsAPinto',
 'DirtyOldMan',
 'DeathOfAChild',
 'SpannerInTheWorks',
 'LoveInterest',
 'TheVoiceless',
 'HookerWithAHeartOfGold',
 'DidNotGetTheGirl',
 'KnightTemplar',
 'PaperThinDisguise',
 'TheLancer',
 'AdaptationalAttractiveness',
 'DramaticIrony',
 'CentralTheme',
 'FanService',
 'TheHeroDies',
 'StylisticSuck',
 'DownplayedTrope',
 'BrokenPedestal',
 'ObstructiveBureaucrat',
 'BreakTheHaughty',
 'CanonForeigner',
 'DepartmentOfRedundancyDepartment',
 'ShesGotLegs',
 'BigEater',
 'OneSteveLimit',
 'SlasherSmile',
 'WrongGenreSavvy',
 'AdultsAreUseless',
 'DisneyDeath',
 'BlackAndGrayMorality',
 'OneWordTitle',
 'DwindlingParty',
 'EvilIsHammy',
 'BFG',
 'NamesToRunAwayFromReallyFast',
 'CallingTheOldManOut',
 'ChaseScene',
 'HaveAGayOldTime',
 'LoopholeAbuse',
 'ShootTheShaggyDog',
 'TheBigGuy',
 'ObviouslyEvil',
 'EasilyForgiven',
 'TheLoad',
 'Foil',
 'ImAHumanitarian',
 'RealLifeWritesThePlot',
 'SuddenlyShouting',
 'HistoricalVillainUpgrade',
 'EveryoneCallsHimBarkeep',
 'BaldOfEvil',
 'InTheBack',
 'TheSmartGuy',
 'Pun',
 'PragmaticVillainy',
 'FireForgedFriends']


# In[323]:


genres = ['Western',
 'War',
 'Adventure',
 'Documentary',
 'Horror',
 'History',
 'Fantasy',
 'Romance',
 'Action',
 'Sport',
 'Mystery',
 'Thriller',
 'Comedy',
 'Drama',
 'Music',
 'Musical',
 'Family',
 'Biography',
 'Sci-Fi',
 'Crime']

#если строкой в любом уродском формате
def trop_to_list(trops):
    trop_list = []
    for i in popular_trops:
        trop_list.append(int(trops.find(i) != -1))

    return trop_list


def genre_probability(trops):
    trop_list = trop_to_list(trops)
    probabilitys = []

    for genre_number in range(len(genres)):
        actual_clf = clfs[genre_number]

        probabilitys.append(actual_clf.predict_proba(pd.DataFrame(data=[trop_list],                                         columns=popular_trops))[0][1])
    return probabilitys
